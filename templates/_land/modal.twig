<!-- Content Modal -->
<div id="modal" class="page overflow-y-scroll z-10 lg:z-2 bg-white grid grid-cols-12 fixed inset-0 flex items-center justify-center !mt-0 pt-14 pb-14" style="padding-top:50px;">

    <div class="bg-white grid grid-cols-subgrid relative col-span-12 lg:col-span-12 lg:col-span-6">

        {% include '_includes/_icons/close' with {
            class: 'content-modal-close !absolute z-2 -top-4 lg:top-0 right-0 modal-close'
        } %}
        <h2 id="modal-title" class="col-span-9 lg:col-span-5 mb-4"></h2>
        <div class="flex gap-4 lg:gap-10 col-span-12 lg:col-span-6 mb-6 lg:mb-8">
            <p id="modal-price" class="text-2xl"></p>
            <p id="modal-address" class="text-2xl"></p>
            <p id="modal-acreage" class="text-2xl"></p>
        </div>
        <div id="modal-description" class="col-span-12 lg:col-span-5"></div>
        <div id="modal-features" class="mt-6 lg:mt-8 mb-6 lg:mb-4 col-span-12 lg:col-span-6 grid grid-cols-subgrid text-[14px] xl:text-base">
            <ul class="list-none !gap-y-4 col-span-12 lg:col-span-6 grid grid-cols-subgrid"></ul>
        </div>
        <div class="col-span-12 lg:col-span-6 flex flex-wrap gap-y-2 gap-x-6">
            {% include '_includes/_blocks/button' with {
                link: '#',
                label: 'Get in touch',
                class: 'email-button text-white w-full lg:w-auto',
                attributes: {
                    'data-id': ''
                }
            } %}
            {% include '_includes/_blocks/button' with {
                link: '#',
                label: 'Call',
                class: 'call-button text-white w-full lg:w-auto'
            } %}
        </div>

        <div id="modal-image-container-wrapper" class="slider-shadow mt-8 grid grid-cols-subgrid flex col-span-12 lg:col-span-6 overflow-x-scroll gap-6 lg:!-mr-0 slider-wrapper snap-x">
            <div class="arrow-wrapper hidden lg:flex z-2 absolute right-8 top-0 bottom-0 m-auto items-center">
                {% include '_includes/_icons/arrowNext' with {
                    nextArrowClass: ''
                } %}
            </div>
            <div
                id="modal-image-container"
                class="slider col-span-12 lg:col-span-6 !pr-0
                {% if listings[0].asset.all()|length == 1 %}single{% endif %}"><!-- hover:opacity-70; snap-start;scroll-ml-16 -->
            </div>
        </div>
    </div>
</div>

<!-- Photo Modal -->
<div id="photo-modal" class="page grid grid-cols-12 !mt-0 z-50 bg-white fixed inset-0 flex items-center justify-center opacity-0 pointer-events-none transition-opacity">

    {% include '_includes/_icons/close' with {
        class: 'photo-modal-close !absolute z-2 top-6 right-6 modal-close'
    } %}
    <div
        id="photo-modal-image-container" class="relative col-span-12 grid grid-cols-subgrid h-full items-center justify-center">
        <!-- Images will be populated here dynamically -->
        <button class="absolute left-0 text-white text-2xl arrow" id="photo-modal-prev">❮</button>
        <button class="absolute right-0 text-white text-2xl arrow" id="photo-modal-next">❯</button>
    </div>
</div>

<!-- Contact Modal -->
{% for listing in listings %}
    <div id="contact-modal-{{ listing.id }}" class="contact-modal !mt-0 fixed translate-y-full inset-0 z-50 bg-red flex items-center justify-center pointer-events-none transition-all duration-300">
        <div class="page grid grid-cols-12">
            {% include '_includes/_icons/close' with {
                class: 'contact-modal-close !bg-white !absolute z-2 top-6 right-6 modal-close'
            } %}
            {% include '_includes/_blocks/formDynamic' with {
                block: listing,
                formHandle: 'contactRealEstate'
            } %}
        </div>

    </div>
{% endfor %}