{"version":3,"file":"formie-form-new-1EG0DLYn.js","sources":["../../src/js/formie-form-new.js"],"sourcesContent":["// CSS needs to be imported here as it's treated as a module\nimport '@/scss/style.scss';\n\n// Accept HMR as per: https://vitejs.dev/guide/api-hmr.html\nif (import.meta.hot) {\n    import.meta.hot.accept();\n}\n\nimport { createVueApp } from './config.js';\nimport { generateHandle, getNextAvailableHandle } from '@utils/string';\n\n//\n// Start Vue Apps\n//\n\nif (typeof Craft.Formie === typeof undefined) {\n    Craft.Formie = {};\n}\n\nCraft.Formie.NewForm = Garnish.Base.extend({\n    init(settings) {\n        const app = createVueApp({\n            data() {\n                return {\n                    name: settings.name,\n                    handle: settings.handle,\n                    handles: [],\n                };\n            },\n\n            watch: {\n                name(val) {\n                    const maxHandleLength = settings.maxFormHandleLength;\n\n                    // Let's get smart about generating a handle. Check if its unique - if it isn't, make it unique\n                    // Be sure to restrict handles well below their limit\n                    this.handle = getNextAvailableHandle(this.handles, generateHandle(this.name), 0).substr(0, maxHandleLength);\n                },\n            },\n\n            created() {\n                this.handles = settings.formHandles.concat(settings.reservedHandles);\n            },\n\n            mounted() {\n                this.$el.querySelector('[name=\"title\"]').focus();\n\n                this.$nextTick().then(() => {\n                    Craft.initUiElements();\n                });\n            },\n        });\n\n        app.mount('#fui-new-form');\n    },\n});\n\n\n// Re-broadcast the custom `vite-script-loaded` event so that we know that this module has loaded\n// Needed because when <script> tags are appended to the DOM, the `onload` handlers\n// are not executed, which happens in the field Settings page, and in slideouts\n// Do this after the document is ready to ensure proper execution order\n$(document).ready(() => {\n    document.dispatchEvent(new CustomEvent('vite-script-loaded', { detail: { path: 'src/js/formie-form-new.js' } }));\n});\n"],"names":["settings","createVueApp","val","maxHandleLength","getNextAvailableHandle","generateHandle"],"mappings":"uDAeI,OAAO,MAAM,OAAW,MACxB,MAAM,OAAS,IAGnB,MAAM,OAAO,QAAU,QAAQ,KAAK,OAAO,CACvC,KAAKA,EAAU,CACCC,EAAa,CACrB,MAAO,CACI,MAAA,CACH,KAAMD,EAAS,KACf,OAAQA,EAAS,OACjB,QAAS,CAAC,CAAA,CAElB,EAEA,MAAO,CACH,KAAKE,EAAK,CACN,MAAMC,EAAkBH,EAAS,oBAIjC,KAAK,OAASI,EAAuB,KAAK,QAASC,EAAe,KAAK,IAAI,EAAG,CAAC,EAAE,OAAO,EAAGF,CAAe,CAC9G,CACJ,EAEA,SAAU,CACN,KAAK,QAAUH,EAAS,YAAY,OAAOA,EAAS,eAAe,CACvE,EAEA,SAAU,CACN,KAAK,IAAI,cAAc,gBAAgB,EAAE,MAAM,EAE1C,KAAA,YAAY,KAAK,IAAM,CACxB,MAAM,eAAe,CAAA,CACxB,CACL,CAAA,CACH,EAEG,MAAM,eAAe,CAC7B,CACJ,CAAC,EAOD,EAAE,QAAQ,EAAE,MAAM,IAAM,CACX,SAAA,cAAc,IAAI,YAAY,qBAAsB,CAAE,OAAQ,CAAE,KAAM,4BAA+B,CAAA,CAAC,CACnH,CAAC"}