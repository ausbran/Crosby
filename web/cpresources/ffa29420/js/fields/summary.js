!function(){"use strict";window.FormieSummary=class{constructor(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$form=s.$form,this.form=this.$form.form,this.$field=s.$field,this.fieldId=s.fieldId,this.loadingClass=this.form.getClasses("loading"),this.submissionId=null,this.debouncedFetch=this.debounce(this.fetchSummary.bind(this),300),"ajax"===this.form.settings.submitMethod&&this.initVisibilityObserver()}initVisibilityObserver(){new IntersectionObserver((s=>{s[0].intersectionRatio>0&&this.onFieldVisible()}),{root:this.$form,rootMargin:"50px"}).observe(this.$field)}onFieldVisible(){const s=this.$form.querySelector('[name="submissionId"]');s&&(this.submissionId=s.value),this.submissionId?this.debouncedFetch():console.error("Summary field: Unable to find `submissionId`")}fetchSummary(){const s=this.$field.querySelector("[data-summary-blocks]");if(!s)return void console.error("Summary field: Unable to find `container`");var t,e;this.loadingClass&&(t=s,e=this.loadingClass,t&&e&&("string"==typeof e&&(e=e.split(" ")),e.forEach((s=>{t.classList.add(s)}))));const i=function(s,t,e,i,o,n){const r=new XMLHttpRequest;r.open(t,e,i,o,n),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("Cache-Control","no-cache");const a=new CustomEvent("modifyAjaxClient",{bubbles:!0,detail:{client:r}});return s.dispatchEvent(a),a.detail.client}(this.$form,"POST",window.location.href,!0);i.onload=()=>{this.loadingClass&&function(s,t){s&&t&&("string"==typeof t&&(t=t.split(" ")),t.forEach((t=>{s.classList.remove(t)})))}(s,this.loadingClass),i.status>=200&&i.status<300&&(s.parentNode.innerHTML=i.responseText)};const o={action:"formie/fields/get-summary-html",submissionId:this.submissionId,fieldId:this.fieldId},n=new FormData;for(const s in o)n.append(s,o[s]);i.send(n)}debounce(s,t){var e=this;let i;return function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];i&&clearTimeout(i),i=setTimeout((()=>{s.apply(e,n)}),t)}}}}();